# MyThreadPool

线程池的基本思想是预先创建一定数量的线程，并将它们放入一个池中。线程池负责管理线程的生命周期，并将任务分配给空闲线程执行。这样可以避免每次任务执行时都创建和销毁线程的开销。

如果要编写一个线程池，它的组成如下:

线程池管理器：负责创建、销毁线程，维护线程池状态（如空闲线程、忙碌线程）。
任务队列：用于存储待执行的任务。任务通常以函数对象（如 std::function）的形式存储。
工作线程：线程池中的实际线程，它们从任务队列中取出任务并执行。
同步机制：用于保护任务队列和线程池状态的线程安全操作，通常使用互斥锁和条件变量。
在设计线程池时，我们需要考虑以下几个重要原则：

线程池大小管理：
固定大小：线程池中的线程数量固定不变。适用于负载比较稳定的场景。
动态调整：根据任务负载动态调整线程池大小。适用于负载变化较大的场景。
任务队列管理：
FIFO 队列：最常用的任务队列实现方式，按照任务提交的顺序执行任务。
优先级队列：根据任务的优先级执行任务，适用于需要按优先级处理任务的场景。
线程安全：
互斥锁：用于保护共享资源（如任务队列）的访问。
条件变量：用于线程之间的通信，如通知空闲线程有新的任务到来。
原子变量：对原子变量的操作都是原子操作，它是线程安全的。
任务执行与错误处理：
任务执行过程中的异常需要适当处理，以避免线程池中的线程因未捕获异常而终止。


参考：https://subingwen.cn/cpp/threadpool/#1-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E8%AE%BE%E8%AE%A1
